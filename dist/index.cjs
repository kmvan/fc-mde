"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("react"),Ke={zh:"预览","zh-CN":"预览"},He={zh:"编辑","zh-CN":"编辑"},Ve={"Add a link":{zh:"附加链接","zh-CN":"附加链接"},"Add bold text":{zh:"附加粗体","zh-CN":"附加粗体"},"Add checked list":{zh:"附加任务列表","zh-CN":"附加任务列表"},"Add header":{zh:"附加标题","zh-CN":"附加标题"},"Add image":{zh:"附加图像","zh-CN":"附加图像"},"Add italic text":{zh:"附加斜体","zh-CN":"附加斜体"},"Add ordered list":{zh:"附加有序列表","zh-CN":"附加有序列表"},"Add strikethrough text":{zh:"附加删除线","zh-CN":"附加删除线"},"Add unordered list":{zh:"附加无序列表","zh-CN":"附加无序列表"},"Insert a quote":{zh:"附加引用","zh-CN":"附加引用"},"Insert code":{zh:"附加代码","zh-CN":"附加代码"},Preview:Ke,Write:He};class Ge{langId="";setLangId=t=>{this.langId=t};gettext=(t,r="")=>{if(!this.langId)return t;const s=`${r||""}${t}`;return Ve?.[s]?.[this.langId]??t}}const h=new Ge;function Ue(n,t){if(!n)throw Error("Argument 'text' should be truthy");const r=a=>a===" "||a.charCodeAt(0)===10;let s=0,o=n.length;for(let a=t;a-1>-1;a--)if(r(n[a-1])){s=a;break}for(let a=t;a<n.length;a++)if(r(n[a])){o=a;break}return{start:s,end:o}}function S({text:n,selection:t}){return n&&n.length&&t.start===t.end?Ue(n,t.start):t}function ue(n="",t){if(t===0)return 0;let r=2,s=!0;for(let o=t-1;o>=0&&r>=0;o--)switch(n.charCodeAt(o)){case 32:continue;case 10:r--,s=!1;break;default:return r}return s?0:r}function fe(n="",t){if(t===n.length-1)return 0;let r=2,s=!0;for(let o=t;o<n.length&&r>=0;o++)switch(n.charCodeAt(o)){case 32:continue;case 10:{r--,s=!1;break}default:return r}return s?0:r}const Je=()=>({buttonProps:{"aria-label":h.gettext("Add bold text"),title:h.gettext("Add bold text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`**${o.selectedText}**`);r(t.setSelectionRange({start:a.selection.end-2-o.selectedText.length,end:a.selection.end-2}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="b"}),Xe=()=>({buttonProps:{"aria-label":h.gettext("Insert code"),title:h.gettext("Insert code")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s);if(o.selectedText.indexOf(`
`)===-1){t.replaceSelection(`\`${o.selectedText}\``);const x=o.selection.start+1,w=x+o.selectedText.length;t.setSelectionRange({start:x,end:w});return}const a=ue(o.text,o.selection.start),d=Array(a+1).join(`
`),f=fe(o.text,o.selection.end),p=Array(f+1).join(`
`);t.replaceSelection(`${d}\`\`\`
${o.selectedText}
\`\`\`${p}`);const m=o.selection.start+a+4,v=m+o.selectedText.length;r(t.setSelectionRange({start:m,end:v}).text)}}),Fe=(n,t,r)=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`${r}${o.selectedText}`);return t.setSelectionRange({start:a.selection.end-o.selectedText.length,end:a.selection.end})},De=()=>({buttonProps:{"aria-label":h.gettext("Add header"),title:h.gettext("Add header")},execute:({initialState:n,textApi:t,setText:r})=>{r(Fe(n,t,"### ").text)}}),Qe=()=>({buttonProps:{"aria-label":h.gettext("Add image"),title:h.gettext("Add image")},execute:({initialState:n,textApi:t,setText:r})=>{const s=t.setSelectionRange(S({text:n.text,selection:n.selection})),o=s.selectedText||"https://example.com/your-image.png";t.replaceSelection(`![](${o})`),r(t.setSelectionRange({start:s.selection.start+4,end:s.selection.start+4+o.length}).text)}}),Ze=()=>({buttonProps:{"aria-label":h.gettext("Add italic text"),title:h.gettext("Add italic text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`*${o.selectedText}*`);r(t.setSelectionRange({start:a.selection.end-1-o.selectedText.length,end:a.selection.end-1}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="i"}),et=()=>({buttonProps:{"aria-label":h.gettext("Add a link"),title:h.gettext("Add a link")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`[${o.selectedText}](url)`);r(t.setSelectionRange({start:a.selection.end-6-o.selectedText.length,end:a.selection.end-6}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="k"});function tt(n,t){const r=n.split(/\n/);let s=0;return{modifiedText:r.map((a,d)=>{if(typeof t=="string")return s+=t.length,t+a;if(typeof t=="function"){const f=t(a,d);return s+=f.length,t(a,d)+a}throw Error("insertion is expected to be either a string or a function")}).join(`
`),insertionLength:s}}const me=(n,t,r)=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=ue(o.text,o.selection.start),d=Array(a+1).join(`
`),f=fe(o.text,o.selection.end),p=Array(f+1).join(`
`),m=tt(o.selectedText,r);t.replaceSelection(`${d}${m.modifiedText}${p}`);const v=o.selectedText.indexOf(`
`)===-1?m.insertionLength:0,x=o.selection.start+a+v,w=x+m.modifiedText.length-v;return t.setSelectionRange({start:x,end:w})},nt=()=>({buttonProps:{"aria-label":h.gettext("Add unordered list"),title:h.gettext("Add unordered list")},execute:({initialState:n,textApi:t,setText:r})=>{r(me(n,t,"- ").text)}}),ot=()=>({buttonProps:{"aria-label":h.gettext("Add ordered list"),title:h.gettext("Add ordered list")},execute:({initialState:n,textApi:t,setText:r})=>{r(me(n,t,(s,o)=>`${o+1}. `).text)}}),rt=()=>({buttonProps:{"aria-label":h.gettext("Add checked list"),title:h.gettext("Add checked list")},execute:({initialState:n,textApi:t,setText:r})=>{r(me(n,t,()=>"- [ ] ").text)}}),at=()=>({buttonProps:{"aria-label":h.gettext("Insert a quote"),title:h.gettext("Insert a quote")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=ue(o.text,o.selection.start),d=Array(a+1).join(`
`),f=fe(o.text,o.selection.end),p=Array(f+1).join(`
`);t.replaceSelection(`${d}> ${o.selectedText}${p}`);const m=o.selection.start+a+2,v=m+o.selectedText.length;r(t.setSelectionRange({start:m,end:v}).text)}}),st=()=>({buttonProps:{"aria-label":h.gettext("Add strikethrough text"),title:h.gettext("Add strikethrough text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=S({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`~~${o.selectedText}~~`);r(t.setSelectionRange({start:a.selection.end-2-o.selectedText.length,end:a.selection.end-2}).text)}}),$e=()=>[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unorderedList","orderedList","checkedList"]],he=()=>({header:De,bold:Je,italic:Ze,strikethrough:st,link:et,quote:at,code:Xe,image:Qe,unorderedList:nt,orderedList:ot,checkedList:rt});function de(){return"save-image"}var Q={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je;function ct(){if(je)return G;je=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,o,a){var d=null;if(a!==void 0&&(d=""+a),o.key!==void 0&&(d=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:s,key:d,ref:o!==void 0?o:null,props:a}}return G.Fragment=t,G.jsx=r,G.jsxs=r,G}var U={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae;function it(){return Ae||(Ae=1,process.env.NODE_ENV!=="production"&&function(){function n(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K:return"Fragment";case ee:return"Portal";case E:return"Profiler";case F:return"StrictMode";case ne:return"Suspense";case oe:return"SuspenseList"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case N:return(e.displayName||"Context")+".Provider";case L:return(e._context.displayName||"Context")+".Consumer";case te:var c=e.render;return e=e.displayName,e||(e=c.displayName||c.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return c=e.displayName||null,c!==null?c:n(e.type)||"Memo";case ae:c=e._payload,e=e._init;try{return n(e(c))}catch{}}return null}function t(e){return""+e}function r(e){try{t(e);var c=!1}catch{c=!0}if(c){c=console;var i=c.error,u=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return i.call(c,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",u),t(e)}}function s(){}function o(){if(H===0){be=console.log,pe=console.info,ve=console.warn,ye=console.error,Ce=console.group,ke=console.groupCollapsed,Ee=console.groupEnd;var e={configurable:!0,enumerable:!0,value:s,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}H++}function a(){if(H--,H===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},e,{value:be}),info:M({},e,{value:pe}),warn:M({},e,{value:ve}),error:M({},e,{value:ye}),group:M({},e,{value:Ce}),groupCollapsed:M({},e,{value:ke}),groupEnd:M({},e,{value:Ee})})}0>H&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function d(e){if(ce===void 0)try{throw Error()}catch(i){var c=i.stack.trim().match(/\n( *(at )?)/);ce=c&&c[1]||"",we=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+e+we}function f(e,c){if(!e||ie)return"";var i=le.get(e);if(i!==void 0)return i;ie=!0,i=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var u=null;u=O.H,O.H=null,o();try{var C={DetermineComponentFrameRoot:function(){try{if(c){var A=function(){throw Error()};if(Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(j){var D=j}Reflect.construct(e,[],A)}else{try{A.call()}catch(j){D=j}e.call(A.prototype)}}else{try{throw Error()}catch(j){D=j}(A=e())&&typeof A.catch=="function"&&A.catch(function(){})}}catch(j){if(j&&D&&typeof j.stack=="string")return[j.stack,D.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=C.DetermineComponentFrameRoot(),R=l[0],B=l[1];if(R&&B){var k=R.split(`
`),P=B.split(`
`);for(l=g=0;g<k.length&&!k[g].includes("DetermineComponentFrameRoot");)g++;for(;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;if(g===k.length||l===P.length)for(g=k.length-1,l=P.length-1;1<=g&&0<=l&&k[g]!==P[l];)l--;for(;1<=g&&0<=l;g--,l--)if(k[g]!==P[l]){if(g!==1||l!==1)do if(g--,l--,0>l||k[g]!==P[l]){var V=`
`+k[g].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),typeof e=="function"&&le.set(e,V),V}while(1<=g&&0<=l);break}}}finally{ie=!1,O.H=u,a(),Error.prepareStackTrace=i}return k=(k=e?e.displayName||e.name:"")?d(k):"",typeof e=="function"&&le.set(e,k),k}function p(e){if(e==null)return"";if(typeof e=="function"){var c=e.prototype;return f(e,!(!c||!c.isReactComponent))}if(typeof e=="string")return d(e);switch(e){case ne:return d("Suspense");case oe:return d("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case te:return e=f(e.render,!1),e;case re:return p(e.type);case ae:c=e._payload,e=e._init;try{return p(e(c))}catch{}}return""}function m(){var e=O.A;return e===null?null:e.getOwner()}function v(e){if(xe.call(e,"key")){var c=Object.getOwnPropertyDescriptor(e,"key").get;if(c&&c.isReactWarning)return!1}return e.key!==void 0}function x(e,c){function i(){Te||(Te=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",c))}i.isReactWarning=!0,Object.defineProperty(e,"key",{get:i,configurable:!0})}function w(){var e=n(this.type);return Se[e]||(Se[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function _(e,c,i,u,C,g){return i=g.ref,e={$$typeof:Y,type:e,key:c,props:g,_owner:C},(i!==void 0?i:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:w}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function $(e,c,i,u,C,g){if(typeof e=="string"||typeof e=="function"||e===K||e===E||e===F||e===ne||e===oe||e===Ie||typeof e=="object"&&e!==null&&(e.$$typeof===ae||e.$$typeof===re||e.$$typeof===N||e.$$typeof===L||e.$$typeof===te||e.$$typeof===We||e.getModuleId!==void 0)){var l=c.children;if(l!==void 0)if(u)if(se(l)){for(u=0;u<l.length;u++)J(l[u],e);Object.freeze&&Object.freeze(l)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else J(l,e)}else l="",(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(l+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),e===null?u="null":se(e)?u="array":e!==void 0&&e.$$typeof===Y?(u="<"+(n(e.type)||"Unknown")+" />",l=" Did you accidentally export a JSX literal instead of a component?"):u=typeof e,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",u,l);if(xe.call(c,"key")){l=n(e);var R=Object.keys(c).filter(function(k){return k!=="key"});u=0<R.length?"{key: someKey, "+R.join(": ..., ")+": ...}":"{key: someKey}",_e[l+u]||(R=0<R.length?"{"+R.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,u,l,R,l),_e[l+u]=!0)}if(l=null,i!==void 0&&(r(i),l=""+i),v(c)&&(r(c.key),l=""+c.key),"key"in c){i={};for(var B in c)B!=="key"&&(i[B]=c[B])}else i=c;return l&&x(i,typeof e=="function"?e.displayName||e.name||"Unknown":e),_(e,l,g,C,m(),i)}function J(e,c){if(typeof e=="object"&&e&&e.$$typeof!==Ye){if(se(e))for(var i=0;i<e.length;i++){var u=e[i];q(u)&&X(u,c)}else if(q(e))e._store&&(e._store.validated=1);else if(e===null||typeof e!="object"?i=null:(i=ge&&e[ge]||e["@@iterator"],i=typeof i=="function"?i:null),typeof i=="function"&&i!==e.entries&&(i=i.call(e),i!==e))for(;!(e=i.next()).done;)q(e.value)&&X(e.value,c)}}function q(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y}function X(e,c){if(e._store&&!e._store.validated&&e.key==null&&(e._store.validated=1,c=W(c),!Re[c])){Re[c]=!0;var i="";e&&e._owner!=null&&e._owner!==m()&&(i=null,typeof e._owner.tag=="number"?i=n(e._owner.type):typeof e._owner.name=="string"&&(i=e._owner.name),i=" It was passed a child from "+i+".");var u=O.getCurrentStack;O.getCurrentStack=function(){var C=p(e.type);return u&&(C+=u()||""),C},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',c,i),O.getCurrentStack=u}}function W(e){var c="",i=m();return i&&(i=n(i.type))&&(c=`

Check the render method of \``+i+"`."),c||(e=n(e))&&(c=`

Check the top-level render call using <`+e+">."),c}var z=y,Y=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),N=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),ge=Symbol.iterator,qe=Symbol.for("react.client.reference"),O=z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=Object.prototype.hasOwnProperty,M=Object.assign,We=Symbol.for("react.client.reference"),se=Array.isArray,H=0,be,pe,ve,ye,Ce,ke,Ee;s.__reactDisabledLog=!0;var ce,we,ie=!1,le=new(typeof WeakMap=="function"?WeakMap:Map),Ye=Symbol.for("react.client.reference"),Te,Se={},_e={},Re={};U.Fragment=K,U.jsx=function(e,c,i,u,C){return $(e,c,i,!1,u,C)},U.jsxs=function(e,c,i,u,C){return $(e,c,i,!0,u,C)}}()),U}var Ne;function lt(){return Ne||(Ne=1,process.env.NODE_ENV==="production"?Q.exports=ct():Q.exports=it()),Q.exports}var b=lt();const dt=(n,t)=>{n.setRangeText(t,n.selectionStart||0,n.selectionEnd||0,"select")};function ut(n){const t=[];for(const r in n)n.hasOwnProperty.call(n,r)&&n[r]().handleKeyCommand&&t.push(r);return t}class ft{refTextarea;constructor(t){this.refTextarea=t}replaceSelection=t=>{const r=this.refTextarea.current;return dt(r,t),Z(r)};setSelectionRange=t=>{const r=this.refTextarea.current;return r.focus(),r.selectionStart=t.start,r.selectionEnd=t.end,Z(r)};getState=()=>{const t=this.refTextarea.current;return Z(t)}}const Z=n=>({selection:{start:n.selectionStart,end:n.selectionEnd},text:n.value,selectedText:n.value.slice(n.selectionStart,n.selectionEnd)});class mt{setText;refTextarea;textApi;commandMap;keyActivatedCommands;isExecuting=!1;pasteOptions;constructor({setText:t,customCommands:r,refTextarea:s,pasteOptions:o}){if(o&&!o.saveImage)throw new Error("paste options are incomplete. saveImage are required ");this.commandMap={...he(),...r||{}},this.pasteOptions=o,this.keyActivatedCommands=ut(r),this.refTextarea=s,this.textApi=new ft(s),this.setText=t}getCommand=t=>{const r=this.commandMap[t];if(!r)throw new Error(`Cannot execute command. Command not found: ${t}`);return r()};handleKeyCommand=async t=>{for(const r of this.keyActivatedCommands)if(this.getCommand(r)?.handleKeyCommand?.(t))return await this.executeCommand(r),!0;return!1};executeCommand=async(t,r)=>{if(this.isExecuting)return;this.isExecuting=!0;const s=this.refTextarea.current,o=Z(s);await this.getCommand(t).execute({setText:this.setText,initialState:o,textApi:this.textApi,context:r}),this.isExecuting=!1};executePasteCommand=async t=>{if(this.pasteOptions)return this.executeCommand(this.pasteOptions.command||de(),{pasteOptions:this.pasteOptions,event:t})};executeDropCommand=async t=>{if(this.pasteOptions)return this.executeCommand(this.pasteOptions.command||de(),{pasteOptions:this.pasteOptions,event:t})};executeSelectImageCommand=async t=>{if(this.pasteOptions)return this.executeCommand(this.pasteOptions.command||de(),{pasteOptions:this.pasteOptions,event:t})};getCommandByName=t=>this.commandMap[t]}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ze=(...n)=>n.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=y.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:d,...f},p)=>y.createElement("svg",{ref:p,...gt,width:t,height:t,stroke:n,strokeWidth:s?Number(r)*24/Number(t):r,className:ze("lucide",o),...f},[...d.map(([m,v])=>y.createElement(m,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=(n,t)=>{const r=y.forwardRef(({className:s,...o},a)=>y.createElement(xt,{ref:a,iconNode:t,className:ze(`lucide-${ht(n)}`,s),...o}));return r.displayName=`${n}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=T("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=T("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=T("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=T("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=T("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=T("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=T("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=T("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=T("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=T("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=T("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]),Rt="fc-mde__main_e76010f9ac3f69e6",jt={main:Rt},At=n=>b.jsx("div",{"data-fc-mde-svg-icon-container":!0,...n}),Nt=({icon:n})=>{const t={header:vt,bold:bt,italic:Ct,strikethrough:_t,code:pt,quote:St,unorderedList:wt,orderedList:Tt,checkedList:Et,link:kt,image:yt}[n]??null;return t?b.jsx(At,{children:b.jsx(t,{className:jt.main,"data-fc-mde-svg-icon":!0})}):null},Ot="fc-mde__content_59ee8347a45e0596",Oe={content:Ot},Le=y.forwardRef(({markdown:n,generateMarkdownPreview:t,loadingPreview:r},s)=>{const[o,a]=y.useState(!0),[d,f]=y.useState(""),[p,m]=y.useState(""),v=y.useCallback(async()=>{f(await t(n)),a(!1)},[t,n]);y.useEffect(()=>{n!==p&&(v(),m(n))},[p,n,v]);let x=null;return o?x=b.jsx("div",{className:Oe.content,"data-fc-mde-preview-content":!0,children:r}):x=b.jsx("div",{className:Oe.content,ref:s,"data-fc-mde-preview-content":!0,dangerouslySetInnerHTML:{__html:d}}),b.jsx("div",{"data-mde-preview":!0,"data-loading":o||void 0,children:x})});Le.displayName="MdePreview";const Mt="fc-mde__container_5d480c472a769b14",Pt="fc-mde__main_bbe7a060507c7387",Me={container:Mt,main:Pt},Be=y.forwardRef(({value:n,setValue:t,textareaComponent:r,onKeyCommand:s,...o},a)=>{const d=r||"textarea",f=y.useCallback(m=>{m.preventDefault(),(m.clipboardData.files??[]).length},[]),p=y.useCallback(m=>{t(m.target.value)},[t]);return b.jsx("div",{className:Me.container,"data-fc-mde-textarea-container":!0,children:b.jsx(d,{ref:a,className:Me.main,value:n,onChange:p,onKeyDown:s,onPaste:f,"data-fc-mde-textarea":!0,...o})})});Be.displayName="MdeTextarea";const $t="fc-mde__tab_707475e156219802",zt="fc-mde__tabButton_5a17ac662ec07934",Lt="fc-mde__header_1d136c3d982ffdcc",Bt="fc-mde__btnGroup_b384efee5a15e109",It="fc-mde__btn_a61d3b8445301110",I={tab:$t,tabButton:zt,header:Lt,btnGroup:Bt,btn:It},qt={tabIndex:-1},Wt=({buttonComponentClass:n,buttonContent:t,buttonProps:r,onClick:s,readOnly:o,name:a})=>{const d={...qt,...r||{}},f=n||"button";return b.jsx("div",{className:I.btn,"data-fc-mde-toolbar-button":!0,children:y.createElement(f,{"data-fc-mde-toolbar-button-item":!0,"data-name":a,...d,onClick:s,disabled:o,type:"button"},t)})},Yt=({hidden:n,children:t})=>b.jsx("div",{className:I.btnGroup,"data-fc-mde-toolbar-button-group":!0,"data-hidden":n||void 0,children:t}),Kt=({onTabChange:n,buttons:t,onCommand:r,readOnly:s,disablePreview:o,writeButtonProps:a,previewButtonProps:d,tab:f,buttonProps:p})=>{const m=(x,w)=>{x.preventDefault(),n(w)};if(!t?.length)return null;const v=b.jsxs("div",{className:I.tab,"data-fc-mde-tab":!0,children:[b.jsx("button",{type:"button",className:I.tabButton,"data-fc-mde-tab-button":!0,onClick:x=>m(x,"write"),"data-active":f==="write"||void 0,...a,children:h.gettext("Write")}),b.jsx("button",{type:"button",className:I.tabButton,"data-fc-mde-tab-button":!0,onClick:x=>m(x,"preview"),"data-active":f==="preview"||void 0,...d,children:h.gettext("Preview")})]});return b.jsxs("div",{className:I.header,"data-fc-mde-header":!0,children:[o||v,t.map((x,w)=>b.jsx(Yt,{hidden:f==="preview",children:x.map((_,$)=>b.jsx(Wt,{name:_.commandName,buttonContent:_.buttonContent,buttonProps:{...p||{},..._.buttonProps},onClick:()=>r(_.commandName),readOnly:s,buttonComponentClass:_.buttonComponentClass},$))},w))]})},Ht="fc-mde__main_c29a242caf055ec0",Vt="fc-mde__container_8e4c12095dec4180",Pe={main:Ht,container:Vt},Gt=({setText:n,refTextarea:t,commands:r=he(),toolbarCommands:s=$e(),getIcon:o=W=>b.jsx(Nt,{icon:W}),readOnly:a=!1,selectedTab:d="write",disablePreview:f=!1,paste:p,onTabChange:m,loadingPreview:v,text:x,generateMarkdownPreview:w,textareaComponent:_,commandButtons:$,writeButton:J,previewButton:q,textareaProps:X})=>{const W=y.useRef(null),z=new mt({setText:n,customCommands:r,refTextarea:t,pasteOptions:p}),Y=async E=>{p?.saveImage&&await z.executePasteCommand(E)},ee=E=>{m(E)},K=async E=>{await z.executeCommand(E)},F=s.map(E=>E.map(L=>{const N=z.getCommand(L);return{commandName:L,buttonContent:N.icon?N.icon(o):o(L),buttonProps:N.buttonProps,buttonComponentClass:N.buttonComponentClass}})).filter(E=>E);return b.jsxs("div",{className:Pe.main,"data-fc-mde":!0,children:[b.jsx(Kt,{buttons:F,onCommand:K,onTabChange:ee,tab:d,readOnly:a,disablePreview:f,buttonProps:$,writeButtonProps:J,previewButtonProps:q}),b.jsx("div",{className:Pe.container,"data-fc-mde-container":!0,"data-hidden":d==="preview"||void 0,children:b.jsx(Be,{ref:t,value:x,setValue:n,textareaComponent:_,onKeyCommand:z.handleKeyCommand,onPaste:Y,...X})}),d!=="write"&&b.jsx(Le,{ref:W,loadingPreview:v,generateMarkdownPreview:w,markdown:x})]})};exports.Mde=Gt;exports.getDefaultCommandMap=he;exports.getDefaultToolbarCommands=$e;exports.selectWord=S;
