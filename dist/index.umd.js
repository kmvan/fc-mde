(function(S,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],x):(S=typeof globalThis<"u"?globalThis:S||self,x(S["fc-mde"]={},S.React))})(this,function(S,x){"use strict";const We={"Add a link":{zh:"附加链接","zh-CN":"附加链接"},"Add bold text":{zh:"附加粗体","zh-CN":"附加粗体"},"Add checked list":{zh:"附加任务列表","zh-CN":"附加任务列表"},"Add header":{zh:"附加标题","zh-CN":"附加标题"},"Add image":{zh:"附加图像","zh-CN":"附加图像"},"Add italic text":{zh:"附加斜体","zh-CN":"附加斜体"},"Add ordered list":{zh:"附加有序列表","zh-CN":"附加有序列表"},"Add strikethrough text":{zh:"附加删除线","zh-CN":"附加删除线"},"Add unordered list":{zh:"附加无序列表","zh-CN":"附加无序列表"},"Insert a quote":{zh:"附加引用","zh-CN":"附加引用"},"Insert code":{zh:"附加代码","zh-CN":"附加代码"},Preview:{zh:"预览","zh-CN":"预览"},Write:{zh:"编辑","zh-CN":"编辑"}};class Ye{langId="";setLangId=t=>{this.langId=t};gettext=(t,r="")=>{if(!this.langId)return t;const s=`${r||""}${t}`;return We?.[s]?.[this.langId]??t}}const h=new Ye;function $e(n,t){if(!n)throw Error("Argument 'text' should be truthy");const r=a=>a===" "||a.charCodeAt(0)===10;let s=0,o=n.length;for(let a=t;a-1>-1;a--)if(r(n[a-1])){s=a;break}for(let a=t;a<n.length;a++)if(r(n[a])){o=a;break}return{start:s,end:o}}function _({text:n,selection:t}){return n&&n.length&&t.start===t.end?$e(n,t.start):t}function Z(n="",t){if(t===0)return 0;let r=2,s=!0;for(let o=t-1;o>=0&&r>=0;o--)switch(n.charCodeAt(o)){case 32:continue;case 10:r--,s=!1;break;default:return r}return s?0:r}function D(n="",t){if(t===n.length-1)return 0;let r=2,s=!0;for(let o=t;o<n.length&&r>=0;o++)switch(n.charCodeAt(o)){case 32:continue;case 10:{r--,s=!1;break}default:return r}return s?0:r}const Ke=()=>({buttonProps:{"aria-label":h.gettext("Add bold text"),title:h.gettext("Add bold text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`**${o.selectedText}**`);r(t.setSelectionRange({start:a.selection.end-2-o.selectedText.length,end:a.selection.end-2}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="b"}),He=()=>({buttonProps:{"aria-label":h.gettext("Insert code"),title:h.gettext("Insert code")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s);if(o.selectedText.indexOf(`
`)===-1){t.replaceSelection(`\`${o.selectedText}\``);const v=o.selection.start+1,T=v+o.selectedText.length;t.setSelectionRange({start:v,end:T});return}const a=Z(o.text,o.selection.start),d=Array(a+1).join(`
`),f=D(o.text,o.selection.end),p=Array(f+1).join(`
`);t.replaceSelection(`${d}\`\`\`
${o.selectedText}
\`\`\`${p}`);const m=o.selection.start+a+4,y=m+o.selectedText.length;r(t.setSelectionRange({start:m,end:y}).text)}}),Ge=(n,t,r)=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`${r}${o.selectedText}`);return t.setSelectionRange({start:a.selection.end-o.selectedText.length,end:a.selection.end})},Ve=()=>({buttonProps:{"aria-label":h.gettext("Add header"),title:h.gettext("Add header")},execute:({initialState:n,textApi:t,setText:r})=>{r(Ge(n,t,"### ").text)}}),Ue=()=>({buttonProps:{"aria-label":h.gettext("Add image"),title:h.gettext("Add image")},execute:({initialState:n,textApi:t,setText:r})=>{const s=t.setSelectionRange(_({text:n.text,selection:n.selection})),o=s.selectedText||"https://example.com/your-image.png";t.replaceSelection(`![](${o})`),r(t.setSelectionRange({start:s.selection.start+4,end:s.selection.start+4+o.length}).text)}}),qe=()=>({buttonProps:{"aria-label":h.gettext("Add italic text"),title:h.gettext("Add italic text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`*${o.selectedText}*`);r(t.setSelectionRange({start:a.selection.end-1-o.selectedText.length,end:a.selection.end-1}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="i"}),Je=()=>({buttonProps:{"aria-label":h.gettext("Add a link"),title:h.gettext("Add a link")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`[${o.selectedText}](url)`);r(t.setSelectionRange({start:a.selection.end-6-o.selectedText.length,end:a.selection.end-6}).text)},handleKeyCommand:n=>(n.ctrlKey||n.metaKey)&&n.key==="k"});function Xe(n,t){const r=n.split(/\n/);let s=0;return{modifiedText:r.map((a,d)=>{if(typeof t=="string")return s+=t.length,t+a;if(typeof t=="function"){const f=t(a,d);return s+=f.length,t(a,d)+a}throw Error("insertion is expected to be either a string or a function")}).join(`
`),insertionLength:s}}const ee=(n,t,r)=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=Z(o.text,o.selection.start),d=Array(a+1).join(`
`),f=D(o.text,o.selection.end),p=Array(f+1).join(`
`),m=Xe(o.selectedText,r);t.replaceSelection(`${d}${m.modifiedText}${p}`);const y=o.selectedText.indexOf(`
`)===-1?m.insertionLength:0,v=o.selection.start+a+y,T=v+m.modifiedText.length-y;return t.setSelectionRange({start:v,end:T})},Fe=()=>({buttonProps:{"aria-label":h.gettext("Add unordered list"),title:h.gettext("Add unordered list")},execute:({initialState:n,textApi:t,setText:r})=>{r(ee(n,t,"- ").text)}}),Qe=()=>({buttonProps:{"aria-label":h.gettext("Add ordered list"),title:h.gettext("Add ordered list")},execute:({initialState:n,textApi:t,setText:r})=>{r(ee(n,t,(s,o)=>`${o+1}. `).text)}}),Ze=()=>({buttonProps:{"aria-label":h.gettext("Add checked list"),title:h.gettext("Add checked list")},execute:({initialState:n,textApi:t,setText:r})=>{r(ee(n,t,()=>"- [ ] ").text)}}),De=()=>({buttonProps:{"aria-label":h.gettext("Insert a quote"),title:h.gettext("Insert a quote")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=Z(o.text,o.selection.start),d=Array(a+1).join(`
`),f=D(o.text,o.selection.end),p=Array(f+1).join(`
`);t.replaceSelection(`${d}> ${o.selectedText}${p}`);const m=o.selection.start+a+2,y=m+o.selectedText.length;r(t.setSelectionRange({start:m,end:y}).text)}}),et=()=>({buttonProps:{"aria-label":h.gettext("Add strikethrough text"),title:h.gettext("Add strikethrough text")},execute:({initialState:n,textApi:t,setText:r})=>{const s=_({text:n.text,selection:n.selection}),o=t.setSelectionRange(s),a=t.replaceSelection(`~~${o.selectedText}~~`);r(t.setSelectionRange({start:a.selection.end-2-o.selectedText.length,end:a.selection.end-2}).text)}}),me=()=>[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unorderedList","orderedList","checkedList"]],te=()=>({header:Ve,bold:Ke,italic:qe,strikethrough:et,link:Je,quote:De,code:He,image:Ue,unorderedList:Fe,orderedList:Qe,checkedList:Ze});function tt(){return"save-image"}var J={exports:{}},$={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function nt(){if(he)return $;he=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,o,a){var d=null;if(a!==void 0&&(d=""+a),o.key!==void 0&&(d=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:s,key:d,ref:o!==void 0?o:null,props:a}}return $.Fragment=t,$.jsx=r,$.jsxs=r,$}var K={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge;function ot(){return ge||(ge=1,process.env.NODE_ENV!=="production"&&function(){function n(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Mt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case oe:return"Portal";case M:return"Profiler";case W:return"StrictMode";case ae:return"Suspense";case se:return"SuspenseList"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case Te:return(e.displayName||"Context")+".Provider";case Ee:return(e._context.displayName||"Context")+".Consumer";case re:var c=e.render;return e=e.displayName,e||(e=c.displayName||c.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return c=e.displayName||null,c!==null?c:n(e.type)||"Memo";case ie:c=e._payload,e=e._init;try{return n(e(c))}catch{}}return null}function t(e){return""+e}function r(e){try{t(e);var c=!1}catch{c=!0}if(c){c=console;var i=c.error,u=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return i.call(c,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",u),t(e)}}function s(){}function o(){if(U===0){_e=console.log,Re=console.info,je=console.warn,Ae=console.error,Ne=console.group,Me=console.groupCollapsed,Pe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:s,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}U++}function a(){if(U--,U===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:O({},e,{value:_e}),info:O({},e,{value:Re}),warn:O({},e,{value:je}),error:O({},e,{value:Ae}),group:O({},e,{value:Ne}),groupCollapsed:O({},e,{value:Me}),groupEnd:O({},e,{value:Pe})})}0>U&&console.error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}function d(e){if(de===void 0)try{throw Error()}catch(i){var c=i.stack.trim().match(/\n( *(at )?)/);de=c&&c[1]||"",Oe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+e+Oe}function f(e,c){if(!e||ue)return"";var i=fe.get(e);if(i!==void 0)return i;ue=!0,i=Error.prepareStackTrace,Error.prepareStackTrace=void 0;var u=null;u=P.H,P.H=null,o();try{var k={DetermineComponentFrameRoot:function(){try{if(c){var N=function(){throw Error()};if(Object.defineProperty(N.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(N,[])}catch(A){var Q=A}Reflect.construct(e,[],N)}else{try{N.call()}catch(A){Q=A}e.call(N.prototype)}}else{try{throw Error()}catch(A){Q=A}(N=e())&&typeof N.catch=="function"&&N.catch(function(){})}}catch(A){if(A&&Q&&typeof A.stack=="string")return[A.stack,Q.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=k.DetermineComponentFrameRoot(),j=l[0],Y=l[1];if(j&&Y){var C=j.split(`
`),z=Y.split(`
`);for(l=g=0;g<C.length&&!C[g].includes("DetermineComponentFrameRoot");)g++;for(;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;if(g===C.length||l===z.length)for(g=C.length-1,l=z.length-1;1<=g&&0<=l&&C[g]!==z[l];)l--;for(;1<=g&&0<=l;g--,l--)if(C[g]!==z[l]){if(g!==1||l!==1)do if(g--,l--,0>l||C[g]!==z[l]){var q=`
`+C[g].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),typeof e=="function"&&fe.set(e,q),q}while(1<=g&&0<=l);break}}}finally{ue=!1,P.H=u,a(),Error.prepareStackTrace=i}return C=(C=e?e.displayName||e.name:"")?d(C):"",typeof e=="function"&&fe.set(e,C),C}function p(e){if(e==null)return"";if(typeof e=="function"){var c=e.prototype;return f(e,!(!c||!c.isReactComponent))}if(typeof e=="string")return d(e);switch(e){case ae:return d("Suspense");case se:return d("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case re:return e=f(e.render,!1),e;case ce:return p(e.type);case ie:c=e._payload,e=e._init;try{return p(e(c))}catch{}}return""}function m(){var e=P.A;return e===null?null:e.getOwner()}function y(e){if(Se.call(e,"key")){var c=Object.getOwnPropertyDescriptor(e,"key").get;if(c&&c.isReactWarning)return!1}return e.key!==void 0}function v(e,c){function i(){ze||(ze=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",c))}i.isReactWarning=!0,Object.defineProperty(e,"key",{get:i,configurable:!0})}function T(){var e=n(this.type);return Le[e]||(Le[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function R(e,c,i,u,k,g){return i=g.ref,e={$$typeof:V,type:e,key:c,props:g,_owner:k},(i!==void 0?i:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:T}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function B(e,c,i,u,k,g){if(typeof e=="string"||typeof e=="function"||e===w||e===M||e===W||e===ae||e===se||e===Nt||typeof e=="object"&&e!==null&&(e.$$typeof===ie||e.$$typeof===ce||e.$$typeof===Te||e.$$typeof===Ee||e.$$typeof===re||e.$$typeof===Pt||e.getModuleId!==void 0)){var l=c.children;if(l!==void 0)if(u)if(le(l)){for(u=0;u<l.length;u++)F(l[u],e);Object.freeze&&Object.freeze(l)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else F(l,e)}else l="",(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(l+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),e===null?u="null":le(e)?u="array":e!==void 0&&e.$$typeof===V?(u="<"+(n(e.type)||"Unknown")+" />",l=" Did you accidentally export a JSX literal instead of a component?"):u=typeof e,console.error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",u,l);if(Se.call(c,"key")){l=n(e);var j=Object.keys(c).filter(function(C){return C!=="key"});u=0<j.length?"{key: someKey, "+j.join(": ..., ")+": ...}":"{key: someKey}",Be[l+u]||(j=0<j.length?"{"+j.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,u,l,j,l),Be[l+u]=!0)}if(l=null,i!==void 0&&(r(i),l=""+i),y(c)&&(r(c.key),l=""+c.key),"key"in c){i={};for(var Y in c)Y!=="key"&&(i[Y]=c[Y])}else i=c;return l&&v(i,typeof e=="function"?e.displayName||e.name||"Unknown":e),R(e,l,g,k,m(),i)}function F(e,c){if(typeof e=="object"&&e&&e.$$typeof!==Ot){if(le(e))for(var i=0;i<e.length;i++){var u=e[i];H(u)&&I(u,c)}else if(H(e))e._store&&(e._store.validated=1);else if(e===null||typeof e!="object"?i=null:(i=we&&e[we]||e["@@iterator"],i=typeof i=="function"?i:null),typeof i=="function"&&i!==e.entries&&(i=i.call(e),i!==e))for(;!(e=i.next()).done;)H(e.value)&&I(e.value,c)}}function H(e){return typeof e=="object"&&e!==null&&e.$$typeof===V}function I(e,c){if(e._store&&!e._store.validated&&e.key==null&&(e._store.validated=1,c=G(c),!Ie[c])){Ie[c]=!0;var i="";e&&e._owner!=null&&e._owner!==m()&&(i=null,typeof e._owner.tag=="number"?i=n(e._owner.type):typeof e._owner.name=="string"&&(i=e._owner.name),i=" It was passed a child from "+i+".");var u=P.getCurrentStack;P.getCurrentStack=function(){var k=p(e.type);return u&&(k+=u()||""),k},console.error('Each child in a list should have a unique "key" prop.%s%s See https://react.dev/link/warning-keys for more information.',c,i),P.getCurrentStack=u}}function G(e){var c="",i=m();return i&&(i=n(i.type))&&(c=`

Check the render method of \``+i+"`."),c||(e=n(e))&&(c=`

Check the top-level render call using <`+e+">."),c}var ne=x,V=Symbol.for("react.transitional.element"),oe=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),Te=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Nt=Symbol.for("react.offscreen"),we=Symbol.iterator,Mt=Symbol.for("react.client.reference"),P=ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=Object.prototype.hasOwnProperty,O=Object.assign,Pt=Symbol.for("react.client.reference"),le=Array.isArray,U=0,_e,Re,je,Ae,Ne,Me,Pe;s.__reactDisabledLog=!0;var de,Oe,ue=!1,fe=new(typeof WeakMap=="function"?WeakMap:Map),Ot=Symbol.for("react.client.reference"),ze,Le={},Be={},Ie={};K.Fragment=w,K.jsx=function(e,c,i,u,k){return B(e,c,i,!1,u,k)},K.jsxs=function(e,c,i,u,k){return B(e,c,i,!0,u,k)}}()),K}var be;function rt(){return be||(be=1,process.env.NODE_ENV==="production"?J.exports=nt():J.exports=ot()),J.exports}var b=rt();const at=(n,t)=>{n.setRangeText(t,n.selectionStart||0,n.selectionEnd||0,"select")};function st(n){const t=[];for(const r in n)n.hasOwnProperty.call(n,r)&&n[r]().handleKeyCommand&&t.push(r);return t}class ct{refTextarea;constructor(t){this.refTextarea=t}replaceSelection=t=>{const r=this.refTextarea.current;return at(r,t),X(r)};setSelectionRange=t=>{const r=this.refTextarea.current;return r.focus(),r.selectionStart=t.start,r.selectionEnd=t.end,X(r)};getState=()=>{const t=this.refTextarea.current;return X(t)}}const X=n=>({selection:{start:n.selectionStart,end:n.selectionEnd},text:n.value,selectedText:n.value.slice(n.selectionStart,n.selectionEnd)});class it{setText;refTextarea;textApi;commandMap;keyActivatedCommands;isExecuting=!1;pasteOptions;constructor({setText:t,customCommands:r,refTextarea:s,pasteOptions:o}){if(o&&!o.saveImage)throw new Error("paste options are incomplete. saveImage are required ");this.commandMap={...te(),...r||{}},this.pasteOptions=o,this.keyActivatedCommands=st(r),this.refTextarea=s,this.textApi=new ct(s),this.setText=t}getCommand=t=>{const r=this.commandMap[t];if(!r)throw new Error(`Cannot execute command. Command not found: ${t}`);return r()};handleKeyCommand=async t=>{for(const r of this.keyActivatedCommands)if(this.getCommand(r)?.handleKeyCommand?.(t))return await this.executeCommand(r),!0;return!1};executeCommand=async(t,r)=>{if(this.isExecuting)return;this.isExecuting=!0;const s=this.refTextarea.current,o=X(s);await this.getCommand(t).execute({setText:this.setText,initialState:o,textApi:this.textApi,context:r}),this.isExecuting=!1};executeSelectImageCommand=async t=>{if(this.pasteOptions)return this.executeCommand(this.pasteOptions.command||tt(),{pasteOptions:this.pasteOptions,event:t})};getCommandByName=t=>this.commandMap[t]}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xe=(...n)=>n.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=x.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:d,...f},p)=>x.createElement("svg",{ref:p,...dt,width:t,height:t,stroke:n,strokeWidth:s?Number(r)*24/Number(t):r,className:xe("lucide",o),...f},[...d.map(([m,y])=>x.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=(n,t)=>{const r=x.forwardRef(({className:s,...o},a)=>x.createElement(ut,{ref:a,iconNode:t,className:xe(`lucide-${lt(n)}`,s),...o}));return r.displayName=`${n}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=E("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=E("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=E("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=E("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=E("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=E("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=E("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=E("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=E("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=E("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=E("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]),Et={main:"fc-mde__main_e76010f9ac3f69e6"},Tt=n=>b.jsx("div",{"data-fc-mde-svg-icon-container":!0,...n}),wt=({icon:n})=>{const t={header:ht,bold:ft,italic:bt,strikethrough:Ct,code:mt,quote:kt,unorderedList:pt,orderedList:yt,checkedList:vt,link:xt,image:gt}[n]??null;return t?b.jsx(Tt,{children:b.jsx(t,{className:Et.main,"data-fc-mde-svg-icon":!0})}):null},ve={content:"fc-mde__content_59ee8347a45e0596"},pe=x.forwardRef(({markdown:n,generateMarkdownPreview:t,loadingPreview:r},s)=>{const[o,a]=x.useState(!0),[d,f]=x.useState(""),[p,m]=x.useState(""),y=x.useCallback(async()=>{f(await t(n)),a(!1)},[t,n]);x.useEffect(()=>{n!==p&&(y(),m(n))},[p,n,y]);let v=null;return o?v=b.jsx("div",{className:ve.content,"data-fc-mde-preview-content":!0,children:r}):v=b.jsx("div",{className:ve.content,ref:s,"data-fc-mde-preview-content":!0,dangerouslySetInnerHTML:{__html:d}}),b.jsx("div",{"data-mde-preview":!0,"data-loading":o||void 0,children:v})});pe.displayName="MdePreview";const ye={container:"fc-mde__container_5d480c472a769b14",main:"fc-mde__main_bbe7a060507c7387"},ke=x.forwardRef(({value:n,setValue:t,textareaComponent:r,onKeyCommand:s,...o},a)=>{const d=r||"textarea",f=x.useCallback(m=>{m.preventDefault(),(m.clipboardData.files??[]).length},[]),p=x.useCallback(m=>{t(m.target.value)},[t]);return b.jsx("div",{className:ye.container,"data-fc-mde-textarea-container":!0,children:b.jsx(d,{ref:a,className:ye.main,value:n,onChange:p,onKeyDown:s,onPaste:f,"data-fc-mde-textarea":!0,...o})})});ke.displayName="MdeTextarea";const L={tab:"fc-mde__tab_707475e156219802",tabButton:"fc-mde__tabButton_5a17ac662ec07934",header:"fc-mde__header_1d136c3d982ffdcc",btnGroup:"fc-mde__btnGroup_b384efee5a15e109",btn:"fc-mde__btn_a61d3b8445301110"},St={tabIndex:-1},_t=({buttonComponentClass:n,buttonContent:t,buttonProps:r,onClick:s,readOnly:o,name:a})=>{const d={...St,...r||{}},f=n||"button";return b.jsx("div",{className:L.btn,"data-fc-mde-toolbar-button":!0,children:x.createElement(f,{"data-fc-mde-toolbar-button-item":!0,"data-name":a,...d,onClick:s,disabled:o,type:"button"},t)})},Rt=({hidden:n,children:t})=>b.jsx("div",{className:L.btnGroup,"data-fc-mde-toolbar-button-group":!0,"data-hidden":n||void 0,children:t}),jt=({onTabChange:n,buttons:t,onCommand:r,readOnly:s,disablePreview:o,writeButtonProps:a,previewButtonProps:d,tab:f,buttonProps:p})=>{const m=(v,T)=>{v.preventDefault(),n(T)};if(!t?.length)return null;const y=b.jsxs("div",{className:L.tab,"data-fc-mde-tab":!0,children:[b.jsx("button",{type:"button",className:L.tabButton,"data-fc-mde-tab-button":!0,onClick:v=>m(v,"write"),"data-active":f==="write"||void 0,...a,children:h.gettext("Write")}),b.jsx("button",{type:"button",className:L.tabButton,"data-fc-mde-tab-button":!0,onClick:v=>m(v,"preview"),"data-active":f==="preview"||void 0,...d,children:h.gettext("Preview")})]});return b.jsxs("div",{className:L.header,"data-fc-mde-header":!0,children:[o||y,t.map((v,T)=>b.jsx(Rt,{hidden:f==="preview",children:v.map((R,B)=>b.jsx(_t,{name:R.commandName,buttonContent:R.buttonContent,buttonProps:{...p||{},...R.buttonProps},onClick:()=>r(R.commandName),readOnly:s,buttonComponentClass:R.buttonComponentClass},B))},T))]})},Ce={main:"fc-mde__main_c29a242caf055ec0",container:"fc-mde__container_8e4c12095dec4180"},At=({setText:n,refTextarea:t,commands:r=te(),toolbarCommands:s=me(),getIcon:o=I=>b.jsx(wt,{icon:I}),readOnly:a=!1,selectedTab:d="write",disablePreview:f=!1,onTabChange:p,loadingPreview:m,text:y,generateMarkdownPreview:v,textareaComponent:T,commandButtons:R,writeButton:B,previewButton:F,textareaProps:H})=>{const I=x.useRef(null),G=new it({setText:n,customCommands:r,refTextarea:t}),ne=w=>{p(w)},V=async w=>{await G.executeCommand(w)},oe=s.map(w=>w.map(W=>{const M=G.getCommand(W);return{commandName:W,buttonContent:M.icon?M.icon(o):o(W),buttonProps:M.buttonProps,buttonComponentClass:M.buttonComponentClass}})).filter(w=>w);return b.jsxs("div",{className:Ce.main,"data-fc-mde":!0,children:[b.jsx(jt,{buttons:oe,onCommand:V,onTabChange:ne,tab:d,readOnly:a,disablePreview:f,buttonProps:R,writeButtonProps:B,previewButtonProps:F}),b.jsx("div",{className:Ce.container,"data-fc-mde-container":!0,"data-hidden":d==="preview"||void 0,children:b.jsx(ke,{ref:t,value:y,setValue:n,textareaComponent:T,onKeyCommand:G.handleKeyCommand,...H})}),d!=="write"&&b.jsx(pe,{ref:I,loadingPreview:m,generateMarkdownPreview:v,markdown:y})]})};S.Mde=At,S.getDefaultCommandMap=te,S.getDefaultToolbarCommands=me,S.selectWord=_,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
